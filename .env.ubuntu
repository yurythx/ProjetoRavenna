# =========================================================
# ENV PARA UBUNTU 24.04 + aaPanel - PROJETO RAVENNA
# =========================================================
# INSTRUÇÕES:
# 1. Copie este arquivo para .env: cp .env.ubuntu .env
# 2. Altere as configurações conforme seu ambiente
# 3. Configure domínios no aaPanel conforme documentação
# =========================================================

# =====================
# SERVIDOR UBUNTU - IP: 192.168.1.121
# =====================
HOST_IP=192.168.1.121

# URLs dos serviços para produção
CHATWOOT_URL=https://chatwoot.seudominio.com
EVOLUTION_URL=https://evolution.seudominio.com
N8N_URL=https://n8n.seudominio.com
PORTAINER_URL=https://portainer.seudominio.com

# =====================
# Chatwoot
# =====================
CHATWOOT_IMAGE=chatwoot/chatwoot:latest
CHATWOOT_SIDEKIQ_CONTAINER=chatwoot-sidekiq

CHATWOOT_SECRET_KEY_BASE=chatwoot_ravenna_2024_secret_key_base_256_bits_long_encryption_key_for_rails_application_security_purposes_unique_generated_key_123456789
SECRET_KEY_BASE=chatwoot_ravenna_2024_secret_key_base_256_bits_long_encryption_key_for_rails_application_security_purposes_unique_generated_key_123456789

# SMTP - CONFIGURE COM PROVEDOR REAL PARA PRODUÇÃO
SMTP_DOMAIN=gmail.com
SMTP_ADDRESS=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=seuemail@gmail.com
SMTP_PASSWORD=sua_senha_de_app_gmail
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true
SMTP_OPENSSL_VERIFY_MODE=none
MAILER_SENDER_EMAIL=Suporte Ravenna <seuemail@gmail.com>
MAILER_INBOUND_EMAIL_DOMAIN=

RAILS_ENV=production
NODE_ENV=production
INSTALLATION_ENV=docker

# URLs - ALTERE PARA SEUS DOMÍNIOS CONFIGURADOS NO aaPanel
FRONTEND_URL=https://chatwoot.seudominio.com
# Para acesso local sem SSL: FRONTEND_URL=http://192.168.0.121:3000

FORCE_SSL=true
ENABLE_ACCOUNT_SIGNUP=false
USE_INBOX_AVATAR_FOR_BOT=true
RAILS_LOG_TO_STDOUT=true
LOG_LEVEL=info

POSTGRES_HOST=postgres_chatwoot
POSTGRES_PORT=5432
POSTGRES_USERNAME=postgres
POSTGRES_PASSWORD=PostgresRavenna2024!@#DB789
POSTGRES_DATABASE=chatwoot_production

REDIS_URL=redis://:RedisRavenna2024%21%40%23Cache456@redis_chatwoot:6379
REDIS_HOST=redis_chatwoot
REDIS_PORT=6379
REDIS_PASSWORD=RedisRavenna2024!@#Cache456

# Usando armazenamento local no disco (sem MinIO)
ACTIVE_STORAGE_SERVICE=local

OPENAI_API_KEY=

NETWORK_NAME=app_network
HOST_IP=192.168.0.121
CHATWOOT_PORT=3000
RESTART_POLICY=always

# =====================
# Evolution API
# =====================
EVOLUTION_IMAGE=evoapicloud/evolution-api:v2.3.5
EVOLUTION_CONTAINER=evolution_api
EVOLUTION_PORT=8080

# URL - ALTERE PARA SEU DOMÍNIO CONFIGURADO NO aaPanel
SERVER_URL=https://evolution.seudominio.com
# Para acesso local sem SSL: SERVER_URL=http://192.168.0.121:8080

DEL_INSTANCE=false
DEL_TEMP_INSTANCES=true

# Evolution - segurança e tokens
EVOLUTION_API_KEY=evolution_ravenna_2024_api_key_secure_whatsapp_integration_unique_key_456
EVOLUTION_JWT_SECRET=evolution_jwt_secret_ravenna_2024_secure_token_generation_unique_key_123

# Evolution - provedor (desabilitado)
PROVIDER_ENABLED=false
PROVIDER_HOST=
PROVIDER_PORT=
PROVIDER_PREFIX=

# Evolution - banco de dados
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI=postgresql://postgres:PostgresRavenna2024%21%40%23DB789@postgres_evolution:5432/evolution_production?schema=public
DATABASE_CONNECTION_CLIENT_NAME=evolution_api
DATABASE_URL=postgresql://postgres:PostgresRavenna2024%21%40%23DB789@postgres_evolution:5432/evolution_production?schema=public

# Evolution - Redis
REDIS_ENABLED=true
REDIS_URI=redis://:RedisRavenna2024%21%40%23Cache456@redis_evolution:6379
REDIS_PREFIX_KEY=evolution

# Evolution - Cache Redis detalhado
CACHE_REDIS_ENABLED=true
CACHE_REDIS_URI=redis://:RedisRavenna2024%21%40%23Cache456@redis_evolution:6379
CACHE_REDIS_PREFIX_KEY=evolution
CACHE_REDIS_SAVE_INSTANCES=true
CACHE_LOCAL_ENABLED=false

# Evolution - autenticação e gerais
AUTHENTICATION_API_KEY=${EVOLUTION_API_KEY}
AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=false
LANGUAGE=pt-BR
TELEMETRY=false

# Evolution - integrações opcionais e defaults (evitar avisos do Compose)
TYPEBOT_ENABLED=false
TYPEBOT_API_VERSION=
CHATWOOT_ENABLED=true
CHATWOOT_MESSAGE_READ=true
CHATWOOT_IMPORT_DATABASE_CONNECTION_URI=postgresql://postgres:PostgresRavenna2024%21%40%23DB789@postgres_chatwoot:5432/chatwoot_production?sslmode=disable
CHATWOOT_IMPORT_PLACEHOLDER_MEDIA_MESSAGE=true
CONFIG_SESSION_PHONE_VERSION=

# Evolution - Webhooks recomendados para Chatwoot
WEBHOOK_GLOBAL_ENABLED=false
WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=true
WEBHOOK_EVENTS_APPLICATION_STARTUP=false
WEBHOOK_EVENTS_QRCODE_UPDATED=true
WEBHOOK_EVENTS_MESSAGES_SET=false
WEBHOOK_EVENTS_MESSAGES_UPSERT=true
WEBHOOK_EVENTS_MESSAGES_EDITED=false
WEBHOOK_EVENTS_MESSAGES_UPDATE=true
WEBHOOK_EVENTS_MESSAGES_DELETE=false
WEBHOOK_EVENTS_SEND_MESSAGE=true
WEBHOOK_EVENTS_CONTACTS_SET=false
WEBHOOK_EVENTS_CONTACTS_UPSERT=true
WEBHOOK_EVENTS_CONTACTS_UPDATE=true
WEBHOOK_EVENTS_CONNECTION_UPDATE=true
WEBHOOK_EVENTS_PRESENCE_UPDATE=false
WEBHOOK_EVENTS_CHATS_SET=false
WEBHOOK_EVENTS_CHATS_UPSERT=false
WEBHOOK_EVENTS_CHATS_UPDATE=false

# Rede
RESTART_POLICY=always
NETWORK_NAME=app_network

# =====================
# n8n (se usado)
# =====================
N8N_HOST=192.168.0.121
N8N_PORT=5678
N8N_PROTOCOL=https
# Para acesso local sem SSL: N8N_PROTOCOL=http

# =====================
# Cloudflare (opcional)
# =====================
CLOUDFLARE_IMAGE=cloudflare/cloudflared:latest
CLOUDFLARE_CONTAINER=cloudflare_tunnel
CLOUDFLARE_TUNNEL_TOKEN=seu_token_cloudflare_aqui
CLOUDFLARE_COMMAND=tunnel --no-autoupdate run --token seu_token_cloudflare_aqui

# =========================================================
# INSTRUÇÕES FINAIS:
# =========================================================
# 1. Altere todas as senhas e tokens para valores únicos
# 2. Configure SMTP com provedor real (Gmail, SendGrid, etc.)
# 3. Configure domínios no aaPanel para cada serviço
# 4. Configure SSL/TLS no aaPanel para todos os domínios
# 5. Teste cada serviço após a configuração
# =========================================================