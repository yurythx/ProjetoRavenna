# =========================================================
# ENV RAIZ - PROJETO RAVENNA
# =========================================================
# ATENÇÃO: Arquivo com credenciais sensíveis.
# Configuração centralizada para todos os serviços.
# =========================================================

# =====================
# CONFIGURAÇÕES GERAIS
# =====================
# IP do Servidor (Host) - Usado para acessos externos e endpoints
HOST_IP=192.168.1.121

# Nome da rede Docker compartilhada
NETWORK_NAME=app_network
RESTART_POLICY=always

# =====================
# MinIO (S3 Compatible Storage)
# =====================
# Credenciais Root / Acesso
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=Mn10!9rZ7dX@4qP%b8KfLw2p

S3_ACCESS_KEY=${MINIO_ROOT_USER}
S3_SECRET_KEY=${MINIO_ROOT_PASSWORD}

# Configuração do Bucket
S3_BUCKET=chatwoot
S3_BUCKET_NAME=${S3_BUCKET}
S3_REGION=us-east-1

# Endpoints e Portas
S3_PORT=9004
# Endpoint acessível externamente (Browser) e internamente via IP do host
S3_ENDPOINT=http://${HOST_IP}:${S3_PORT}
# Host interno para comunicação container-a-container (se necessário)
MINIO_HOST=minio

S3_FORCE_PATH_STYLE=true
S3_SSL=false

# =====================
# Chatwoot
# =====================
CHATWOOT_IMAGE=chatwoot/chatwoot:v4.8.0
CHATWOOT_SIDEKIQ_CONTAINER=chatwoot-sidekiq
CHATWOOT_PORT=3000

# URLs
CHATWOOT_URL=https://atendimento.projetohavoc.shop
FRONTEND_URL=${CHATWOOT_URL}
# Configurações de Asset Host para HTTPS
RAILS_ASSET_HOST=${CHATWOOT_URL}
ACTION_CONTROLLER_ASSET_HOST=${CHATWOOT_URL}
ASSET_HOST=${CHATWOOT_URL}

# Segredos e Chaves
SECRET_KEY_BASE=chatwoot_ravenna_2024_secret_key_base_256_bits_long_encryption_key_for_rails_application_security_purposes_unique_generated_key_123456789
OPENAI_API_KEY=

# Email (SMTP)
SMTP_DOMAIN=gmail.com
SMTP_ADDRESS=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=seuemail@gmail.com
SMTP_PASSWORD=smtp_password_here
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true
SMTP_OPENSSL_VERIFY_MODE=none
MAILER_SENDER_EMAIL=TITULO ASSUNTO EMAIL <andersonlemes50@gmail.com>
MAILER_INBOUND_EMAIL_DOMAIN=

# Configurações Rails
RAILS_ENV=production
NODE_ENV=production
INSTALLATION_ENV=docker
FORCE_SSL=false
ENABLE_ACCOUNT_SIGNUP=false
USE_INBOX_AVATAR_FOR_BOT=true
RAILS_LOG_TO_STDOUT=true
LOG_LEVEL=info

# Banco de Dados (PostgreSQL)
POSTGRES_HOST=postgres_chatwoot
POSTGRES_PORT=5432
POSTGRES_USERNAME=postgres
POSTGRES_PASSWORD=PostgresRavenna2024!@#DB789
POSTGRES_DATABASE=chatwoot_production
# Senha codificada para uso em URIs (substituindo !@# por %21%40%23)
POSTGRES_PASSWORD_ENCODED=PostgresRavenna2024%21%40%23DB789

# Cache (Redis)
REDIS_HOST=redis_chatwoot
REDIS_PORT=6379
REDIS_PASSWORD=RedisRavenna2024!@#Cache456
# Senha codificada para uso em URIs
REDIS_PASSWORD_ENCODED=RedisRavenna2024%21%40%23Cache456

# URI do Redis usando senha codificada
REDIS_URL=redis://:${REDIS_PASSWORD_ENCODED}@${REDIS_HOST}:${REDIS_PORT}

# Active Storage (MinIO)
ACTIVE_STORAGE_SERVICE=amazon
AWS_ACCESS_KEY_ID=${S3_ACCESS_KEY}
AWS_SECRET_ACCESS_KEY=${S3_SECRET_KEY}
AWS_REGION=${S3_REGION}
AWS_BUCKET=${S3_BUCKET}
# S3_ENDPOINT já definido na seção MinIO

# =====================
# Evolution API
# =====================
EVOLUTION_IMAGE=evoapicloud/evolution-api:v2.3.5
EVOLUTION_CONTAINER=evolution_api
EVOLUTION_PORT=8080
SERVER_URL=https://evolution.projetohavoc.shop

# Autenticação
EVOLUTION_API_KEY=evolution_ravenna_2024_api_key_secure_whatsapp_integration_unique_key_456
EVOLUTION_JWT_SECRET=evolution_jwt_secret_ravenna_2024_secure_token_generation_unique_key_123
AUTHENTICATION_API_KEY=${EVOLUTION_API_KEY}
AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=false

# Providers (WebSocket)
PROVIDER_ENABLED=false
PROVIDER_HOST=127.0.0.1
PROVIDER_PORT=8081
PROVIDER_PREFIX=/

# Comportamento
DEL_INSTANCE=false
DEL_TEMP_INSTANCES=true
LANGUAGE=pt-BR
TELEMETRY=false

# Banco de Dados (PostgreSQL)
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
# Usando senha codificada na URI
DATABASE_CONNECTION_URI=postgresql://postgres:${POSTGRES_PASSWORD_ENCODED}@postgres_evolution:5432/evolution_production?schema=public
DATABASE_CONNECTION_CLIENT_NAME=evolution_api

# Redis
REDIS_ENABLED=true
# Usando senha codificada na URI
REDIS_URI=redis://:${REDIS_PASSWORD_ENCODED}@redis_evolution:6379
REDIS_PREFIX_KEY=evolution

CACHE_REDIS_ENABLED=true
CACHE_REDIS_URI=redis://:${REDIS_PASSWORD_ENCODED}@redis_evolution:6379
CACHE_REDIS_PREFIX_KEY=evolution
CACHE_REDIS_SAVE_INSTANCES=true
CACHE_LOCAL_ENABLED=false

# Integrações
TYPEBOT_ENABLED=false
TYPEBOT_API_VERSION=

CHATWOOT_ENABLED=true
CHATWOOT_MESSAGE_READ=true
# Usando senha codificada na URI
CHATWOOT_IMPORT_DATABASE_CONNECTION_URI=postgresql://${POSTGRES_USERNAME}:${POSTGRES_PASSWORD_ENCODED}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DATABASE}?sslmode=disable
CHATWOOT_IMPORT_PLACEHOLDER_MEDIA_MESSAGE=true

# Configurações Extras
CONFIG_SESSION_PHONE_VERSION=
CONFIG_SESSION_PHONE_CLIENT=
CONFIG_SESSION_PHONE_NAME=
QRCODE_LIMIT=3

# Webhooks (Desabilitados por padrão)
WEBHOOK_GLOBAL_ENABLED=false
WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=true
WEBHOOK_EVENTS_APPLICATION_STARTUP=false
WEBHOOK_EVENTS_QRCODE_UPDATED=true
WEBHOOK_EVENTS_MESSAGES_UPSERT=true
WEBHOOK_EVENTS_MESSAGES_UPDATE=true
WEBHOOK_EVENTS_SEND_MESSAGE=true
WEBHOOK_EVENTS_CONTACTS_UPSERT=true
WEBHOOK_EVENTS_CONTACTS_UPDATE=true
WEBHOOK_EVENTS_CONNECTION_UPDATE=true

# =====================
# N8N (Configuração Básica)
# =====================
N8N_URL=https://n8n.projetohavoc.shop
N8N_ENCRYPTION_KEY=Y8Dmy5FhuRIDGIrs
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=ChangeMe_UseStrongPassword123!
