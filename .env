# =========================================================
# ENV RAIZ - PROJETO RAVENNA
# =========================================================
# ATENÇÃO: Arquivo com credenciais sensíveis.
# Não commitar em controle de versão.
# 
# CONFIGURAÇÃO PARA UBUNTU 24.04 + aaPanel:
# - HOST_IP: Alterar para IP do servidor Ubuntu (192.168.0.121)
# - URLs: Alterar para domínios configurados no aaPanel se usar SSL
# - SMTP: Configurar com provedor real para produção
# =========================================================

# =====================
# SERVIDOR UBUNTU - IP: 192.168.0.121
# =====================
HOST_IP=192.168.1.121

# URLs dos serviços (HTTPS via Cloudflare Tunnel)
CHATWOOT_URL=https://atendimento.projetohavoc.shop
EVOLUTION_URL=https://evolution.projetohavoc.shop
N8N_URL=https://n8n.projetohavoc.shop
N8N_ENCRYPTION_KEY=Y8Dmy5FhuRIDGIrs
PORTAINER_URL=https://portainer.projetohavoc.shop
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=ChangeMe_UseStrongPassword123!

# =====================
# Chatwoot
# =====================
# Configurações do Chatwoot
CHATWOOT_IMAGE=chatwoot/chatwoot:v4.8.0
CHATWOOT_SIDEKIQ_CONTAINER=chatwoot-sidekiq

SECRET_KEY_BASE=chatwoot_ravenna_2024_secret_key_base_256_bits_long_encryption_key_for_rails_application_security_purposes_unique_generated_key_123456789

SMTP_DOMAIN=gmail.com
SMTP_ADDRESS=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=seuemail@gmail.com
SMTP_PASSWORD=smtp_password_here
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true
SMTP_OPENSSL_VERIFY_MODE=none
MAILER_SENDER_EMAIL=TITULO ASSUNTO EMAIL <andersonlemes50@gmail.com>
MAILER_INBOUND_EMAIL_DOMAIN=

RAILS_ENV=production
NODE_ENV=production
INSTALLATION_ENV=docker
# IMPORTANTE: Usar HTTPS para evitar Mixed Content Error
FRONTEND_URL=https://atendimento.projetohavoc.shop
FORCE_SSL=true
ENABLE_ACCOUNT_SIGNUP=false
USE_INBOX_AVATAR_FOR_BOT=true
RAILS_LOG_TO_STDOUT=true
LOG_LEVEL=info

POSTGRES_HOST=postgres_chatwoot
POSTGRES_PORT=5432
POSTGRES_USERNAME=postgres
POSTGRES_PASSWORD=PostgresRavenna2024!@#DB789
POSTGRES_DATABASE=chatwoot_production

REDIS_URL=redis://:RedisRavenna2024%21%40%23Cache456@redis_chatwoot:6379
REDIS_HOST=redis_chatwoot
REDIS_PORT=6379
REDIS_PASSWORD=RedisRavenna2024!@#Cache456

# Usando armazenamento local no disco (sem MinIO)
ACTIVE_STORAGE_SERVICE=local

# Configurações de Asset Host para HTTPS (Rails)
# IMPORTANTE: Corrige Mixed Content Error para imagens/arquivos do Active Storage
RAILS_ASSET_HOST=https://atendimento.projetohavoc.shop
ACTION_CONTROLLER_ASSET_HOST=https://atendimento.projetohavoc.shop
ASSET_HOST=https://atendimento.projetohavoc.shop

OPENAI_API_KEY=

NETWORK_NAME=app_network
CHATWOOT_PORT=3000
RESTART_POLICY=always

# =====================
# Evolution API
# =====================
EVOLUTION_IMAGE=evoapicloud/evolution-api:v2.3.5
EVOLUTION_CONTAINER=evolution_api
EVOLUTION_PORT=8080
# IMPORTANTE: Usar HTTPS para evitar Mixed Content Error
SERVER_URL=https://evolution.projetohavoc.shop
DEL_INSTANCE=false
DEL_TEMP_INSTANCES=true

# Evolution - segurança e tokens
EVOLUTION_API_KEY=evolution_ravenna_2024_api_key_secure_whatsapp_integration_unique_key_456
EVOLUTION_JWT_SECRET=evolution_jwt_secret_ravenna_2024_secure_token_generation_unique_key_123

# Evolution - provedor (desabilitado)
PROVIDER_ENABLED=false
PROVIDER_HOST=
PROVIDER_PORT=
PROVIDER_PREFIX=

# Evolution - banco de dados
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI=postgresql://postgres:PostgresRavenna2024%21%40%23DB789@postgres_evolution:5432/evolution_production?schema=public
DATABASE_CONNECTION_CLIENT_NAME=evolution_api

# Evolution - Redis
REDIS_ENABLED=true
REDIS_URI=redis://:RedisRavenna2024%21%40%23Cache456@redis_evolution:6379
REDIS_PREFIX_KEY=evolution

# Evolution - Cache Redis detalhado
CACHE_REDIS_ENABLED=true
CACHE_REDIS_URI=redis://:RedisRavenna2024%21%40%23Cache456@redis_evolution:6379
CACHE_REDIS_PREFIX_KEY=evolution
CACHE_REDIS_SAVE_INSTANCES=true
CACHE_LOCAL_ENABLED=false

# Evolution - autenticação e gerais
AUTHENTICATION_API_KEY=${EVOLUTION_API_KEY}
AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=false
LANGUAGE=pt-BR
TELEMETRY=false

# Evolution - integrações opcionais e defaults (evitar avisos do Compose)
TYPEBOT_ENABLED=false
TYPEBOT_API_VERSION=
CHATWOOT_ENABLED=true
CHATWOOT_MESSAGE_READ=true
CHATWOOT_IMPORT_DATABASE_CONNECTION_URI=postgresql://postgres:PostgresRavenna2024%21%40%23DB789@postgres_chatwoot:5432/chatwoot_production?sslmode=disable
CHATWOOT_IMPORT_PLACEHOLDER_MEDIA_MESSAGE=true
CONFIG_SESSION_PHONE_VERSION=

# Evolution - Webhooks recomendados para Chatwoot
WEBHOOK_GLOBAL_ENABLED=false
WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=true
WEBHOOK_EVENTS_APPLICATION_STARTUP=false
WEBHOOK_EVENTS_QRCODE_UPDATED=true
WEBHOOK_EVENTS_MESSAGES_SET=false
WEBHOOK_EVENTS_MESSAGES_UPSERT=true
WEBHOOK_EVENTS_MESSAGES_EDITED=false
WEBHOOK_EVENTS_MESSAGES_UPDATE=true
WEBHOOK_EVENTS_MESSAGES_DELETE=false
WEBHOOK_EVENTS_SEND_MESSAGE=true
WEBHOOK_EVENTS_CONTACTS_SET=false
WEBHOOK_EVENTS_CONTACTS_UPSERT=true
WEBHOOK_EVENTS_CONTACTS_UPDATE=true
WEBHOOK_EVENTS_CONNECTION_UPDATE=true
WEBHOOK_EVENTS_PRESENCE_UPDATE=false
WEBHOOK_EVENTS_CHATS_SET=false
WEBHOOK_EVENTS_CHATS_UPSERT=false
WEBHOOK_EVENTS_CHATS_UPDATE=false
WEBHOOK_EVENTS_GROUPS_UPSERT=false
WEBHOOK_EVENTS_GROUPS_UPDATE=false
WEBHOOK_EVENTS_GROUP_PARTICIPANTS_UPDATE=false
WEBHOOK_EVENTS_LABELS_EDIT=false
WEBHOOK_EVENTS_LABELS_ASSOCIATION=false
WEBHOOK_EVENTS_ERRORS=false
WEBHOOK_EVENTS_ERRORS_WEBHOOK=false
WEBHOOK_EVENTS_TYPEBOT_START=false
WEBHOOK_EVENTS_TYPEBOT_CHANGE_STATUS=false

# Rede

# Extras para compor variáveis referenciadas no Compose
CONFIG_SESSION_PHONE_CLIENT=
CONFIG_SESSION_PHONE_NAME=
QRCODE_LIMIT=3

# WebSocket e WhatsApp Business (defaults para evitar avisos)
WEBSOCKET_ENABLED=false
WEBSOCKET_GLOBAL_EVENTS=false
WA_BUSINESS_TOKEN_WEBHOOK=
WA_BUSINESS_URL=
WA_BUSINESS_LANGUAGE=pt-BR
WA_BUSINESS_VERSION=

# Webhook global (default vazio)
WEBHOOK_GLOBAL_URL=

# Complementos de eventos faltantes
WEBHOOK_EVENTS_CHATS_DELETE=false
WEBHOOK_EVENTS_CALL=false
